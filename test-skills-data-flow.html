<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ€èƒ½æ•°æ®æµæµ‹è¯•æŠ¥å‘Š</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        .test-data {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .warning {
            color: #ffc107;
            font-weight: bold;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border-left: 4px solid #007bff;
            background-color: #f8f9fa;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #007bff;
            color: white;
        }
        .code {
            background-color: #f1f3f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª æŠ€èƒ½æ•°æ®æµæµ‹è¯•æŠ¥å‘Š</h1>
        
        <div class="section">
            <h2>ğŸ“Š æµ‹è¯•æ•°æ®</h2>
            <p>æ‚¨æä¾›çš„ä¿å­˜æ—¶æ•°æ®ï¼š</p>
            <div class="test-data">{
  "title": "æˆ‘çš„æ–°ç®€å†",
  "personalInfo": {
    "name": "é«˜å…ˆç”Ÿ",
    "jobTitle": "è½¯ä»¶å¼€å‘",
    "phone": "17855555555",
    "email": "28754@qq.com",
    "address": "åŒ—äº¬å¸‚æœé˜³åŒº",
    "birthDate": "2000.05",
    "expectedSalary": "12120",
    "startTime": "ä¸€å‘¨å†…",
    "interests": ["æ‰“ç¯®çƒ"]
  },
  "education": [{"id":1,"school":"åŒ—äº¬å¤§å­¦","major":"è®¡ç®—æœºè½¯ä»¶","degree":"æœ¬ç§‘","startDate":"2015","endDate":"2019"}],
  "workExperience": [{"id":1,"company":"æ·±åœ³ç§‘æŠ€ç½‘ç»œ","position":"javaå¼€å‘","startDate":"2017","endDate":"è‡³ä»Š","description":"å†™ä»£ç é˜¿è¾¾æ‰“æ’’æ‰“æ’’å¤«äººç¿å¸†å£«å¤§å¤«VSå…‰å’Œçƒ­é€šè¿‡"}],
  <span class="success">"skills": ["js","java1"],</span>
  <span class="success">"skillsWithLevel": [{"name":"js","level":4},{"name":"java1","level":2}],</span>
  "selfEvaluation": "è®¤çœŸ"
}</div>
        </div>

        <div class="section">
            <h2>ğŸ” é—®é¢˜åˆ†æ</h2>
            <p>æ ¹æ®æ‚¨æè¿°çš„é—®é¢˜ï¼š</p>
            <ul>
                <li>âœ… ä¿å­˜æ—¶æ•°æ®æ­£å¸¸ï¼š<span class="code">skills</span> å’Œ <span class="code">skillsWithLevel</span> éƒ½æœ‰æ•°æ®</li>
                <li>âŒ è§„èŒƒåŒ–åæ•°æ®ä¸¢å¤±ï¼šä¸¤ä¸ªå­—æ®µéƒ½ä¸ºç©º</li>
            </ul>
            
            <h3>æ•°æ®æµè·¯å¾„æ£€æŸ¥ï¼š</h3>
            <table>
                <tr>
                    <th>æ­¥éª¤</th>
                    <th>ä½ç½®</th>
                    <th>é¢„æœŸè¡Œä¸º</th>
                    <th>çŠ¶æ€</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>ç¼–è¾‘é¡µé¢ä¿å­˜</td>
                    <td>å°†æ•°æ®ä¿å­˜åˆ° <span class="code">wx.setStorageSync('resumeData')</span></td>
                    <td class="success">âœ… æ­£å¸¸</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>é¢„è§ˆé¡µé¢åŠ è½½</td>
                    <td>ä» <span class="code">wx.getStorageSync('resumeData')</span> è·å–æ•°æ®</td>
                    <td class="warning">âš ï¸ éœ€éªŒè¯</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>æ•°æ®æ ‡å‡†åŒ–</td>
                    <td><span class="code">normalizeResumeData()</span> å¤„ç†æŠ€èƒ½æ•°æ®</td>
                    <td class="warning">âš ï¸ éœ€éªŒè¯</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>æ¨¡æ¿æ¸²æŸ“</td>
                    <td>ä½¿ç”¨æ ‡å‡†åŒ–åçš„æ•°æ®æ¸²æŸ“æ¨¡æ¿</td>
                    <td class="warning">âš ï¸ éœ€éªŒè¯</td>
                </tr>
            </table>
        </div>

        <div class="section">
            <h2>ğŸ”§ æ•°æ®æ ‡å‡†åŒ–é€»è¾‘æ£€æŸ¥</h2>
            <p>é¢„è§ˆé¡µé¢çš„ <span class="code">normalizeResumeData()</span> å‡½æ•°å¤„ç†é€»è¾‘ï¼š</p>
            
            <h4>å¯¹äº template-four/five/sixï¼š</h4>
            <div class="test-data">// template-four/five/six çš„æŠ€èƒ½æ ¼å¼
const skillsData = rawData.skills || rawData.skillsWithLevel || [];
normalizedData.skills = skillsData.map(item => ({
  name: item.name || item.skillName || '',
  level: item.level || item.proficiency || 80 // é»˜è®¤80%ç†Ÿç»ƒåº¦
}));</div>
            <p>âœ… è¿™æ®µä»£ç åº”è¯¥èƒ½æ­£ç¡®å¤„ç†æ‚¨çš„æ•°æ®ï¼Œå› ä¸ºå®ƒä¼˜å…ˆä½¿ç”¨ <span class="code">rawData.skills</span>ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™ä½¿ç”¨ <span class="code">rawData.skillsWithLevel</span>ã€‚</p>
            
            <h4>å¯¹äº template-one å’Œé»˜è®¤æƒ…å†µï¼š</h4>
            <div class="test-data">// template-one å’Œå…¶ä»–æ¨¡æ¿çš„æ ‡å‡†æ ¼å¼
normalizedData.skillsWithLevel = this.normalizeSkillsData(rawData);
normalizedData.skills = normalizedData.skills || this.normalizeSkillsData(rawData);</div>
            <div class="test-data">normalizeSkillsData: function(rawData) {
  const skills = rawData.skills || rawData.skillsWithLevel || [];
  return skills.map(item => ({
    name: item.name || item.skillName || '',
    level: item.level || item.proficiency || 50 // é»˜è®¤50%ç†Ÿç»ƒåº¦
  }));
}</div>
            <p>âœ… è¿™æ®µä»£ç ä¹Ÿåº”è¯¥èƒ½æ­£ç¡®å¤„ç†æ‚¨çš„æ•°æ®ã€‚</p>
        </div>

        <div class="section">
            <h2>ğŸ› å¯èƒ½çš„é—®é¢˜æ ¹æº</h2>
            <h4>1. æ•°æ®è·å–è·¯å¾„é—®é¢˜</h4>
            <p>é¢„è§ˆé¡µé¢åŠ è½½æ•°æ®æ—¶ï¼š</p>
            <div class="test-data">let storedData = wx.getStorageSync('resumeData');
let rawData = null;

if (storedData && storedData.data) {
  console.log('æˆåŠŸä»æœ¬åœ°å­˜å‚¨åŠ è½½ç®€å†æ•°æ®');
  rawData = storedData.data;
} else {
  console.warn('æœªæ‰¾åˆ°ç®€å†æ•°æ®ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®');
  // ä½¿ç”¨é»˜è®¤æ•°æ®...
}</div>
            <p>é—®é¢˜å¯èƒ½åœ¨ <span class="code">storedData.data</span> çš„ç»“æ„ä¸Šã€‚</p>
            
            <h4>2. æ•°æ®æ ¼å¼ä¸åŒ¹é…</h4>
            <p>ç¼–è¾‘é¡µé¢ä¿å­˜çš„æ•°æ®ç»“æ„ï¼š</p>
            <div class="test-data">const resumeData = {
  isAiGenerated: false,
  templateId: this.data.resumeInfo.templateId,
  data: {  // â† è¿™é‡ŒåµŒå¥—äº†ä¸€å±‚ data
    title: this.data.resumeInfo.title,
    personalInfo: personalInfo,
    education: this.data.resumeInfo.education,
    workExperience: this.data.resumeInfo.workExperience,
    skills: skills,
    skillsWithLevel: skillsWithLevel,
    selfEvaluation: this.data.resumeInfo.selfEvaluation
  }
};</div>
            <p>é¢„è§ˆé¡µé¢æœŸæœ›è·å– <span class="code">storedData.data</span>ï¼Œä½†å¦‚æœä¿å­˜æ—¶ç»“æ„æœ‰é—®é¢˜ï¼Œå¯èƒ½å¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚</p>
        </div>

        <div class="section">
            <h2>ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ</h2>
            
            <h4>æ–¹æ¡ˆä¸€ï¼šæ·»åŠ æ•°æ®éªŒè¯å’Œè°ƒè¯•æ—¥å¿—</h4>
            <p>ä¿®æ”¹é¢„è§ˆé¡µé¢çš„æ•°æ®åŠ è½½é€»è¾‘ï¼Œæ·»åŠ è¯¦ç»†çš„è°ƒè¯•ä¿¡æ¯ï¼š</p>
            <div class="test-data">loadResumeData: function() {
  try {
    console.log('å¼€å§‹åŠ è½½ç®€å†æ•°æ®');
    
    // ä»æœ¬åœ°å­˜å‚¨è·å–ç®€å†æ•°æ®
    let storedData = wx.getStorageSync('resumeData');
    console.log('ä»æœ¬åœ°å­˜å‚¨è·å–çš„åŸå§‹æ•°æ®:', storedData);
    
    let rawData = null;
    
    if (storedData && storedData.data) {
      console.log('æˆåŠŸä»æœ¬åœ°å­˜å‚¨åŠ è½½ç®€å†æ•°æ®');
      rawData = storedData.data;
      
      // éªŒè¯æŠ€èƒ½æ•°æ®
      console.log('æŠ€èƒ½æ•°æ®æ£€æŸ¥:');
      console.log('- rawData.skills:', rawData.skills);
      console.log('- rawData.skillsWithLevel:', rawData.skillsWithLevel);
      console.log('- rawData.skills ç±»å‹:', typeof rawData.skills);
      console.log('- rawData.skillsWithLevel ç±»å‹:', typeof rawData.skillsWithLevel);
      console.log('- rawData.skills é•¿åº¦:', rawData.skills ? rawData.skills.length : 'undefined');
      console.log('- rawData.skillsWithLevel é•¿åº¦:', rawData.skillsWithLevel ? rawData.skillsWithLevel.length : 'undefined');
    } else {
      console.warn('æœªæ‰¾åˆ°ç®€å†æ•°æ®ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®');
      rawData = this.getDefaultData();
    }
    
    // ä½¿ç”¨è§„èŒƒåŒ–å‡½æ•°å¤„ç†æ•°æ®
    const normalizedResumeData = this.normalizeResumeData(rawData);
    console.log('è§„èŒƒåŒ–åçš„ç®€å†æ•°æ®:', normalizedResumeData);
    
    this.setData({
      resumeData: normalizedResumeData,
      loading: false
    });
  } catch (error) {
    console.error('åŠ è½½ç®€å†æ•°æ®å¤±è´¥:', error);
    this.setData({
      loading: false
    });
  }
}</div>
        </div>

        <div class="section">
            <h2>ğŸ§ª å»ºè®®çš„æµ‹è¯•æ­¥éª¤</h2>
            <ol>
                <li>åœ¨ç¼–è¾‘é¡µé¢ä¿å­˜æ—¶ï¼Œæ£€æŸ¥æ§åˆ¶å°è¾“å‡ºçš„ <span class="code">ä¼ é€’çš„ç®€å†æ•°æ®</span></li>
                <li>åœ¨é¢„è§ˆé¡µé¢åŠ è½½æ—¶ï¼Œæ£€æŸ¥æ§åˆ¶å°è¾“å‡ºçš„ <span class="code">ä»æœ¬åœ°å­˜å‚¨è·å–çš„åŸå§‹æ•°æ®</span></li>
                <li>å¯¹æ¯”ä¸¤ä¸ªæ•°æ®ç»“æ„ä¸­ <span class="code">skills</span> å’Œ <span class="code">skillsWithLevel</span> å­—æ®µ</li>
                <li>æ£€æŸ¥æ•°æ®æ ‡å‡†åŒ–è¿‡ç¨‹ä¸­çš„è¯¦ç»†æ—¥å¿—</li>
            </ol>
        </div>

        <div class="section">
            <h2>ğŸ“ æ€»ç»“</h2>
            <p>æ ¹æ®ä»£ç åˆ†æï¼Œæ•°æ®æ ‡å‡†åŒ–é€»è¾‘æ˜¯æ­£ç¡®çš„ï¼Œé—®é¢˜å¾ˆå¯èƒ½å‡ºç°åœ¨ï¼š</p>
            <ol>
                <li><strong>æ•°æ®è·å–è·¯å¾„</strong> - é¢„è§ˆé¡µé¢è·å–çš„ <span class="code">storedData.data</span> ç»“æ„å¯èƒ½ä¸é¢„æœŸä¸ç¬¦</li>
                <li><strong>æ•°æ®ä¸¢å¤±</strong> - åœ¨ä¿å­˜æˆ–è·å–è¿‡ç¨‹ä¸­ï¼ŒæŠ€èƒ½æ•°æ®å¯èƒ½è¢«æ„å¤–è¦†ç›–æˆ–æ¸…ç©º</li>
                <li><strong>å¼‚æ­¥é—®é¢˜</strong> - å¯èƒ½å­˜åœ¨æ—¶åºé—®é¢˜å¯¼è‡´æ•°æ®æœªæ­£ç¡®ä¿å­˜æˆ–åŠ è½½</li>
            </ol>
            <p>å»ºè®®æ·»åŠ è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—æ¥å®šä½å…·ä½“åœ¨å“ªä¸€æ­¥å‡ºç°äº†é—®é¢˜ã€‚</p>
        </div>
    </div>
</body>
</html>