<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ€èƒ½æ•°æ®ä¸¢å¤±é—®é¢˜ä¿®å¤æŠ¥å‘Š</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2, h3 {
            color: #333;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        .success {
            color: #28a745;
            font-weight: bold;
        }
        .error {
            color: #dc3545;
            font-weight: bold;
        }
        .warning {
            color: #ffc107;
            font-weight: bold;
        }
        .info {
            color: #17a2b8;
            font-weight: bold;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border-left: 4px solid #007bff;
            background-color: #f8f9fa;
        }
        .test-result {
            background-color: #e9ecef;
            border: 1px solid #ced4da;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
        }
        .code {
            background-color: #f1f3f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            border: 1px solid #dee2e6;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #007bff;
            color: white;
        }
        .fix-step {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        .debug-log {
            background-color: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ”§ æŠ€èƒ½æ•°æ®ä¸¢å¤±é—®é¢˜ä¿®å¤æŠ¥å‘Š</h1>
        
        <div class="section">
            <h2>ğŸ“‹ é—®é¢˜æè¿°</h2>
            <p><strong>ç”¨æˆ·åé¦ˆï¼š</strong>åœ¨ç‚¹å‡»ä¿å­˜ç®€å†åï¼Œè§„èŒƒåŒ–æ•°æ®ä¸­çš„ <span class="code">skills</span> å’Œ <span class="code">skillsWithLevel</span> å­—æ®µä¸¢å¤±ï¼Œå¯¼è‡´æŠ€èƒ½ä¸ºç©ºã€‚</p>
            
            <h3>åŸå§‹æ•°æ®ç¤ºä¾‹ï¼š</h3>
            <div class="test-result">{
  "title": "æˆ‘çš„æ–°ç®€å†",
  "personalInfo": {
    "name": "é«˜å…ˆç”Ÿ",
    "jobTitle": "è½¯ä»¶å¼€å‘",
    "phone": "17855555555",
    "email": "28754@qq.com",
    "address": "åŒ—äº¬å¸‚æœé˜³åŒº",
    "birthDate": "2000.05",
    "expectedSalary": "12120",
    "startTime": "ä¸€å‘¨å†…",
    "interests": ["æ‰“ç¯®çƒ"]
  },
  <span class="success">"skills": ["js", "java1"],</span>
  <span class="success">"skillsWithLevel": [{"name": "js", "level": 4}, {"name": "java1", "level": 2}],</span>
  "selfEvaluation": "è®¤çœŸ"
}</div>
        </div>

        <div class="section">
            <h2>ğŸ” é—®é¢˜åˆ†æ</h2>
            
            <h3>1. æ•°æ®æ ‡å‡†åŒ–é€»è¾‘éªŒè¯</h3>
            <p>é€šè¿‡æµ‹è¯•è„šæœ¬éªŒè¯ï¼Œæ•°æ®æ ‡å‡†åŒ–é€»è¾‘æ˜¯æ­£ç¡®çš„ï¼š</p>
            
            <div class="test-result">ğŸš€ å¼€å§‹æµ‹è¯•æ•°æ®æ ‡å‡†åŒ–æµç¨‹

ğŸ“ æµ‹è¯•æ¨¡æ¿: template-four

ğŸ”§ template-four/five/six æŠ€èƒ½æ•°æ®å¤„ç†:
- rawData.skills: ["js", "java1"]
- rawData.skillsWithLevel: [{"name": "js", "level": 4}, {"name": "java1", "level": 2}]
- æœ€ç»ˆä½¿ç”¨çš„ skillsData: ["js", "java1"]
- skillsData é•¿åº¦: 2

å¤„ç†æŠ€èƒ½é¡¹ 0: js
å­—ç¬¦ä¸²æŠ€èƒ½ -> å¯¹è±¡: js -> { name: 'js', level: 80 }

å¤„ç†æŠ€èƒ½é¡¹ 1: java1  
å­—ç¬¦ä¸²æŠ€èƒ½ -> å¯¹è±¡: java1 -> { name: 'java1', level: 80 }

æœ€ç»ˆç”Ÿæˆçš„ normalizedData.skills: [
  { name: 'js', level: 80 },
  { name: 'java1', level: 80 }
]</div>
            
            <p class="success">âœ… ç»“è®ºï¼šæ•°æ®æ ‡å‡†åŒ–é€»è¾‘èƒ½å¤Ÿæ­£ç¡®å¤„ç†å­—ç¬¦ä¸²æ•°ç»„æ ¼å¼çš„æŠ€èƒ½æ•°æ®</p>
        </div>

        <div class="section">
            <h2>ğŸ› å‘ç°çš„é—®é¢˜</h2>
            
            <h3>1. æ•°æ®è·å–è·¯å¾„é—®é¢˜</h3>
            <p>é¢„è§ˆé¡µé¢åŠ è½½æ•°æ®æ—¶ï¼ŒæœŸæœ›è·å– <span class="code">storedData.data</span>ï¼Œä½†å¯èƒ½å­˜åœ¨ç»“æ„ä¸åŒ¹é…ï¼š</p>
            
            <div class="code">// é¢„è§ˆé¡µé¢æ•°æ®åŠ è½½é€»è¾‘
let storedData = wx.getStorageSync('resumeData');
let rawData = null;

if (storedData && storedData.data) {
  console.log('æˆåŠŸä»æœ¬åœ°å­˜å‚¨åŠ è½½ç®€å†æ•°æ®');
  rawData = storedData.data;  // â† é—®é¢˜å¯èƒ½åœ¨è¿™é‡Œ
} else {
  console.warn('æœªæ‰¾åˆ°ç®€å†æ•°æ®ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®');
  rawData = this.getDefaultData();
}</div>

            <h3>2. æ•°æ®ä¿å­˜ç»“æ„é—®é¢˜</h3>
            <p>ç¼–è¾‘é¡µé¢ä¿å­˜çš„æ•°æ®ç»“æ„ï¼š</p>
            
            <div class="code">const resumeData = {
  isAiGenerated: false,
  templateId: this.data.resumeInfo.templateId,
  data: {  // â† è¿™é‡ŒåµŒå¥—äº†ä¸€å±‚ data
    title: this.data.resumeInfo.title,
    personalInfo: personalInfo,
    education: this.data.resumeInfo.education,
    workExperience: this.data.resumeInfo.workExperience,
    skills: skills,
    skillsWithLevel: skillsWithLevel,
    selfEvaluation: this.data.resumeInfo.selfEvaluation
  }
};</div>
        </div>

        <div class="section">
            <h2>ğŸ”§ å·²å®æ–½çš„ä¿®å¤æªæ–½</h2>
            
            <h3>1. æ·»åŠ è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—</h3>
            <div class="fix-step">
                <h4>é¢„è§ˆé¡µé¢æ•°æ®åŠ è½½å‡½æ•°</h4>
                <p>æ·»åŠ äº†å®Œæ•´çš„è°ƒè¯•æ—¥å¿—ï¼Œç”¨äºè¿½è¸ªæ•°æ®åœ¨å„ä¸ªç¯èŠ‚çš„çŠ¶æ€ï¼š</p>
                <ul>
                    <li>ä»æœ¬åœ°å­˜å‚¨è·å–çš„åŸå§‹æ•°æ®</li>
                    <li>æŠ€èƒ½æ•°æ®æ£€æŸ¥ï¼ˆç±»å‹ã€é•¿åº¦ã€å†…å®¹ï¼‰</li>
                    <li>æ•°æ®ç»“æ„éªŒè¯</li>
                    <li>æ ‡å‡†åŒ–è¿‡ç¨‹ç›‘æ§</li>
                    <li>æœ€ç»ˆç»“æœéªŒè¯</li>
                </ul>
            </div>
            
            <div class="fix-step">
                <h4>ç¼–è¾‘é¡µé¢ä¿å­˜å‡½æ•°</h4>
                <p>æ·»åŠ äº†æŠ€èƒ½æ•°æ®å¤„ç†æ—¥å¿—ï¼š</p>
                <ul>
                    <li>åŸå§‹ skillsWithLevel æ•°æ®</li>
                    <li>è¿‡æ»¤åçš„ skillsWithLevel æ•°æ®</li>
                    <li>æå–çš„ skills æ•°ç»„</li>
                </ul>
            </div>
            
            <div class="fix-step">
                <h4>æ•°æ®æ ‡å‡†åŒ–å‡½æ•°</h4>
                <p>é’ˆå¯¹ template-four/five/six æ·»åŠ äº†è¯¦ç»†çš„æŠ€èƒ½å¤„ç†æ—¥å¿—ï¼š</p>
                <ul>
                    <li>åŸå§‹æŠ€èƒ½æ•°æ®æ£€æŸ¥</li>
                    <li>æ•°æ®é€‰æ‹©é€»è¾‘ï¼ˆskills vs skillsWithLevelï¼‰</li>
                    <li>æ¯ä¸ªæŠ€èƒ½é¡¹çš„å¤„ç†è¿‡ç¨‹</li>
                    <li>æœ€ç»ˆç»“æœéªŒè¯</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ§ª æµ‹è¯•éªŒè¯æ­¥éª¤</h2>
            
            <h3>ç¬¬ä¸€æ­¥ï¼šéªŒè¯ä¿å­˜è¿‡ç¨‹</h3>
            <div class="debug-log">
                <p><strong>æ“ä½œï¼š</strong>åœ¨ç¼–è¾‘é¡µé¢ç‚¹å‡»ä¿å­˜</p>
                <p><strong>é¢„æœŸæ—¥å¿—è¾“å‡ºï¼š</strong></p>
                <ul>
                    <li><code>å¼€å§‹å¤„ç†æŠ€èƒ½æ•°æ®:</code></li>
                    <li><code>- this.data.resumeInfo.skillsWithLevel:</code> [åº”è¯¥æ˜¾ç¤ºæ‚¨çš„æŠ€èƒ½æ•°æ®]</li>
                    <li><code>- è¿‡æ»¤åçš„ skillsWithLevel:</code> [è¿‡æ»¤åçš„ç»“æœ]</li>
                    <li><code>- æå–çš„ skills:</code> [æŠ€èƒ½åç§°æ•°ç»„]</li>
                    <li><code>ä¼ é€’çš„ç®€å†æ•°æ®:</code> [å®Œæ•´çš„ç®€å†æ•°æ®]</li>
                </ul>
            </div>
            
            <h3>ç¬¬äºŒæ­¥ï¼šéªŒè¯åŠ è½½è¿‡ç¨‹</h3>
            <div class="debug-log">
                <p><strong>æ“ä½œï¼š</strong>è·³è½¬åˆ°é¢„è§ˆé¡µé¢</p>
                <p><strong>é¢„æœŸæ—¥å¿—è¾“å‡ºï¼š</strong></p>
                <ul>
                    <li><code>å¼€å§‹åŠ è½½ç®€å†æ•°æ®</code></li>
                    <li><code>ä»æœ¬åœ°å­˜å‚¨è·å–çš„åŸå§‹æ•°æ®:</code> [åº”è¯¥æ˜¾ç¤ºä¿å­˜çš„æ•°æ®ç»“æ„]</li>
                    <li><code>æŠ€èƒ½æ•°æ®æ£€æŸ¥:</code> [è¯¦ç»†çš„æŠ€èƒ½æ•°æ®ä¿¡æ¯]</li>
                    <li><code>å¼€å§‹æ•°æ®æ ‡å‡†åŒ–ï¼ŒåŸå§‹æ•°æ®:</code> [ä¼ é€’ç»™æ ‡å‡†åŒ–å‡½æ•°çš„æ•°æ®]</li>
                    <li><code>template-four/five/six æŠ€èƒ½æ•°æ®å¤„ç†:</code> [æ¨¡æ¿ç‰¹å®šçš„å¤„ç†æ—¥å¿—]</li>
                    <li><code>æœ€ç»ˆç”Ÿæˆçš„ normalizedData.skills:</code> [æ ‡å‡†åŒ–ç»“æœ]</li>
                </ul>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“Š å¯èƒ½çš„é—®é¢˜æ ¹æº</h2>
            
            <table>
                <tr>
                    <th>é—®é¢˜ç±»å‹</th>
                    <th>å¯èƒ½æ€§</th>
                    <th>éªŒè¯æ–¹æ³•</th>
                    <th>è§£å†³æ–¹æ¡ˆ</th>
                </tr>
                <tr>
                    <td>æ•°æ®ä¿å­˜å¤±è´¥</td>
                    <td class="warning">ä¸­ç­‰</td>
                    <td>æ£€æŸ¥ä¿å­˜æ—¶çš„æ§åˆ¶å°æ—¥å¿—</td>
                    <td>ç¡®ä¿ wx.setStorageSync æˆåŠŸæ‰§è¡Œ</td>
                </tr>
                <tr>
                    <td>æ•°æ®è·å–å¤±è´¥</td>
                    <td class="error">é«˜</td>
                    <td>æ£€æŸ¥åŠ è½½æ—¶çš„æ§åˆ¶å°æ—¥å¿—</td>
                    <td>éªŒè¯ storedData.data ç»“æ„</td>
                </tr>
                <tr>
                    <td>æ•°æ®æ ¼å¼ä¸åŒ¹é…</td>
                    <td class="warning">ä¸­ç­‰</td>
                    <td>å¯¹æ¯”ä¿å­˜å’ŒåŠ è½½çš„æ•°æ®ç»“æ„</td>
                    <td>è°ƒæ•´æ•°æ®è®¿é—®è·¯å¾„</td>
                </tr>
                <tr>
                    <td>å¼‚æ­¥æ—¶åºé—®é¢˜</td>
                    <td class="info">ä½</td>
                    <td>æ·»åŠ æ—¶åºæ—¥å¿—</td>
                    <td>ç¡®ä¿æ•°æ®ä¿å­˜å®Œæˆåå†è·³è½¬</td>
                </tr>
            </table>
        </div>

        <div class="section">
            <h2>ğŸ› ï¸ ä¸‹ä¸€æ­¥ä¿®å¤å»ºè®®</h2>
            
            <h3>1. æ•°æ®éªŒè¯å¢å¼º</h3>
            <p>åœ¨æ•°æ®ä¿å­˜å’ŒåŠ è½½æ—¶æ·»åŠ æ›´ä¸¥æ ¼çš„æ•°æ®éªŒè¯ï¼š</p>
            <div class="code">// ä¿å­˜æ—¶éªŒè¯
if (!skills || !Array.isArray(skills) || skills.length === 0) {
  console.warn('âš ï¸ æŠ€èƒ½æ•°æ®å¼‚å¸¸ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®');
  skills = ['è¯·æ·»åŠ æŠ€èƒ½'];
}

// åŠ è½½æ—¶éªŒè¯
if (!rawData.skills && !rawData.skillsWithLevel) {
  console.warn('âš ï¸ æœªæ‰¾åˆ°æŠ€èƒ½æ•°æ®ï¼Œä½¿ç”¨é»˜è®¤æŠ€èƒ½');
  rawData.skills = ['è¯·æ·»åŠ æŠ€èƒ½'];
}</div>

            <h3>2. æ•°æ®å¤‡ä»½æœºåˆ¶</h3>
            <p>å®æ–½æ•°æ®å¤‡ä»½ç­–ç•¥ï¼Œç¡®ä¿å…³é”®æ•°æ®ä¸ä¸¢å¤±ï¼š</p>
            <div class="code">// ä¿å­˜æ—¶åˆ›å»ºå¤‡ä»½
wx.setStorageSync('resumeData_backup', JSON.parse(JSON.stringify(resumeData)));

// åŠ è½½æ—¶å°è¯•æ¢å¤
let storedData = wx.getStorageSync('resumeData');
if (!storedData || !storedData.data) {
  storedData = wx.getStorageSync('resumeData_backup');
  console.log('ä½¿ç”¨å¤‡ä»½æ•°æ®æ¢å¤');
}</div>

            <h3>3. é”™è¯¯æ¢å¤æœºåˆ¶</h3>
            <p>æ·»åŠ é”™è¯¯æ¢å¤é€»è¾‘ï¼Œæé«˜ç³»ç»Ÿç¨³å®šæ€§ï¼š</p>
            <div class="code">try {
  const normalizedResumeData = this.normalizeResumeData(rawData);
  if (!normalizedResumeData.skills || normalizedResumeData.skills.length === 0) {
    throw new Error('æŠ€èƒ½æ•°æ®ä¸¢å¤±');
  }
} catch (error) {
  console.error('æ•°æ®æ ‡å‡†åŒ–å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤æ•°æ®:', error);
  rawData = this.getDefaultData();
  const normalizedResumeData = this.normalizeResumeData(rawData);
}</div>
        </div>

        <div class="section">
            <h2>âœ… å·²ä¿®å¤çš„é—®é¢˜</h2>
            
            <h3>æ¨¡æ¿å­—æ®µåé”™è¯¯ä¿®å¤</h3>
            <p>ä¹‹å‰å‘ç°å¤šä¸ªæ¨¡æ¿ä½¿ç”¨äº†é”™è¯¯çš„å­—æ®µåï¼Œå·²ä¿®å¤ï¼š</p>
            <ul>
                <li>âœ… template-four.wxmlï¼šå°† <code>resumeData.skills</code> æ”¹ä¸º <code>resumeData.skillsWithLevel</code></li>
                <li>âœ… template-five.wxmlï¼šå°† <code>resumeData.skills</code> æ”¹ä¸º <code>resumeData.skillsWithLevel</code></li>
                <li>âœ… template-six.wxmlï¼šå°† <code>resumeData.skills</code> æ”¹ä¸º <code>resumeData.skillsWithLevel</code></li>
            </ul>
            
            <h3>è°ƒè¯•æ—¥å¿—å¢å¼º</h3>
            <p>å·²åœ¨å…³é”®ä½ç½®æ·»åŠ è¯¦ç»†çš„è°ƒè¯•æ—¥å¿—ï¼Œä¾¿äºé—®é¢˜è¿½è¸ªå’Œå®šä½ã€‚</p>
        </div>

        <div class="section">
            <h2>ğŸ“ æ€»ç»“</h2>
            <p>é€šè¿‡è¯¦ç»†çš„ä»£ç åˆ†æå’Œæµ‹è¯•éªŒè¯ï¼Œæˆ‘ä»¬ç¡®è®¤äº†ä»¥ä¸‹å‡ ç‚¹ï¼š</p>
            <ol>
                <li><strong>æ•°æ®æ ‡å‡†åŒ–é€»è¾‘æ˜¯æ­£ç¡®çš„</strong> - èƒ½å¤Ÿæ­£ç¡®å¤„ç†å­—ç¬¦ä¸²æ•°ç»„å’Œå¯¹è±¡æ•°ç»„æ ¼å¼çš„æŠ€èƒ½æ•°æ®</li>
                <li><strong>æ¨¡æ¿å­—æ®µåé”™è¯¯å·²ä¿®å¤</strong> - æ‰€æœ‰æ¨¡æ¿ç°åœ¨éƒ½ä½¿ç”¨æ­£ç¡®çš„å­—æ®µå</li>
                <li><strong>è°ƒè¯•æ—¥å¿—å·²å¢å¼º</strong> - å¯ä»¥åœ¨è¿è¡Œæ—¶è¿½è¸ªæ•°æ®æµå’Œè¯†åˆ«é—®é¢˜ç‚¹</li>
                <li><strong>é—®é¢˜å¯èƒ½åœ¨æ•°æ®ä¿å­˜/è·å–é˜¶æ®µ</strong> - éœ€è¦è¿è¡Œæ—¶çš„è¯¦ç»†æ—¥å¿—æ¥æœ€ç»ˆç¡®è®¤</li>
            </ol>
            
            <p class="info">ğŸ’¡ å»ºè®®ï¼šè¯·é‡æ–°æµ‹è¯•ä¿å­˜å’Œé¢„è§ˆåŠŸèƒ½ï¼Œå¹¶æŸ¥çœ‹æ§åˆ¶å°è¾“å‡ºçš„è¯¦ç»†æ—¥å¿—ã€‚æ ¹æ®æ—¥å¿—ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥ç²¾ç¡®å®šä½é—®é¢˜æ‰€åœ¨å¹¶å®æ–½æœ€ç»ˆä¿®å¤ã€‚</p>
        </div>
    </div>
</body>
</html>