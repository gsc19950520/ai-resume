{
  "add_module": {
    "name": "interview_room_advanced_logic",
    "description": "定义 AI 面试房间的核心交互流程与动态反馈机制。支持语音输入、AI 追问、即时评分、动态深度层次控制。",
    "interactions": [
      {
        "step": "初始化",
        "trigger": "onPageLoad",
        "actions": [
          {
            "call": "/api/interview/start"
          },
          {
            "display": "questionCard"
          },
          {
            "setState": {
              "depthLevel": "用法",
              "progress": 0
            }
          }
        ]
      },
      {
        "step": "用户回答",
        "trigger": "onSubmitAnswer",
        "flow": [
          "若用户使用语音 -> 调用语音转文字模块 /api/audio2text",
          "将文字答案发送到 /api/interview/answer",
          "等待 AI 返回结构: {nextQuestion, perQuestionScore, feedback, stopFlag}",
          "动态显示反馈动画：打分环形进度条 (4个维度平均)、反馈文字 fadeIn",
          "若 stopFlag = false -> 显示\"继续追问\"按钮；若 stopFlag = true -> 自动进入总结页"
        ]
      },
      {
        "step": "追问生成",
        "trigger": "onClick(\"继续追问\")",
        "actions": [
          {
            "call": "/api/interview/answer",
            "params": {"lastAnswer": true}
          },
          {
            "update": {
              "depthLevel": "实现" → "原理" → "优化"
            }
          },
          {
            "display": "加载动画 (\"AI 正在准备下一个问题…\")"
          }
        ]
      },
      {
        "step": "会话控制",
        "triggers": [
          {
            "event": "跳过当前问题",
            "action": "自动切换到下一个 projectPoint"
          },
          {
            "event": "暂停",
            "action": "保存当前状态到 /api/interview/save_state"
          },
          {
            "event": "结束面试",
            "action": "调用 /api/interview/finish 并跳转至 interview_report"
          }
        ]
      },
      {
        "step": "评分展示",
        "components": [
          {
            "name": "RadarAnimation",
            "description": "展示四维度得分 (tech, logic, clarity, depth)"
          },
          {
            "name": "FeedbackPopup",
            "description": "动态弹出\"AI 对你的点评\""
          },
          {
            "name": "AutoScrollToNext",
            "description": "用户点击\"下一题\"后平滑滚动到新问题"
          }
        ]
      },
      {
        "step": "会话结束",
        "actions": [
          {
            "call": "/api/interview/finish"
          },
          {
            "call": "/api/salary/match"
          },
          {
            "call": "/api/user/history/add"
          },
          {
            "navigate": "interview_report"
          }
        ]
      }
    ],
    "ui_animation": [
      {
        "component": "questionCard",
        "animation": "slide-from-bottom"
      },
      {
        "component": "feedbackPanel",
        "animation": "fade-in + pulse"
      },
      {
        "component": "radarScore",
        "animation": "grow + rotate"
      },
      {
        "component": "buttons",
        "animation": "hover-scale"
      }
    ]
  }
}