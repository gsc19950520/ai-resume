<!-- preview.wxml -->
<view class="container">
  <!-- 顶部操作栏 -->
  <view class="toolbar">
    <button class="back-btn" bindtap="backToList" type="default">返回列表</button>
    <view class="template-title">{{templateName}}</view>
    <button class="use-btn" bindtap="useTemplate" type="primary">使用此模板</button>
  </view>

  <!-- 模板预览区域 -->
  <view class="preview-container">
    <!-- 简历预览卡片 -->
    <view class="resume-card {{template.styleClass || 'basic-template'}}">
      <!-- 个人信息部分 -->
      <view class="personal-info" wx:if="{{template.sections.personalInfo}}">
        <text class="name">{{previewData.personalInfo.name}}</text>
        <text class="job-title">{{previewData.personalInfo.jobTitle}}</text>
        <view class="contact-info">
          <text class="contact-item">{{previewData.personalInfo.phone}}</text>
          <text class="contact-item">{{previewData.personalInfo.email}}</text>
          <text class="contact-item">{{previewData.personalInfo.address}}</text>
        </view>
      </view>

      <!-- 教育经历 -->
      <view class="section" wx:if="{{template.sections.education}}">
        <view class="section-title">教育经历</view>
        <view class="section-content">
          <view class="education-item" wx:for="{{previewData.education}}" wx:key="index">
            <view class="education-header">
              <text class="school">{{item.school}}</text>
              <text class="date">{{item.startDate}} - {{item.endDate}}</text>
            </view>
            <view class="education-detail">
              <text class="major">{{item.major}}</text>
              <text class="degree">{{item.degree}}</text>
            </view>
          </view>
        </view>
      </view>

      <!-- 工作经历 -->
      <view class="section" wx:if="{{template.sections.workExperience}}">
        <view class="section-title">工作经历</view>
        <view class="section-content">
          <view class="work-item" wx:for="{{previewData.workExperience}}" wx:key="index">
            <view class="work-header">
              <text class="company">{{item.company}}</text>
              <text class="date">{{item.startDate}} - {{item.endDate}}</text>
            </view>
            <text class="position">{{item.position}}</text>
            <text class="description">{{item.description}}</text>
          </view>
        </view>
      </view>

      <!-- 项目经验 -->
      <view class="section" wx:if="{{template.sections.projects}}">
        <view class="section-title">项目经验</view>
        <view class="section-content">
          <view class="project-item" wx:for="{{previewData.projects}}" wx:key="index">
            <view class="project-header">
              <text class="project-name">{{item.name}}</text>
              <text class="date">{{item.startDate}} - {{item.endDate}}</text>
            </view>
            <text class="role">{{item.role}}</text>
            <text class="description">{{item.description}}</text>
          </view>
        </view>
      </view>

      <!-- 专业技能 -->
      <view class="section" wx:if="{{template.sections.skills}}">
        <view class="section-title">专业技能</view>
        <view class="section-content">
          <view class="skills-container">
            <view class="skill-tag" wx:for="{{previewData.skills}}" wx:key="index">
              {{item}}
            </view>
          </view>
        </view>
      </view>

      <!-- 自我评价 -->
      <view class="section" wx:if="{{template.sections.selfEvaluation}}">
        <view class="section-title">自我评价</view>
        <view class="section-content">
          <text class="self-evaluation">{{previewData.selfEvaluation}}</text>
        </view>
      </view>
    </view>
  </view>
</view>