<!-- preview.wxml -->
<view class="container">
  <!-- é¡¶éƒ¨æ“ä½œæ  - ç²¾è‡´è®¾è®¡ -->
  <view class="toolbar">
    <button class="back-btn" bindtap="backToList" type="default">
      <view class="back-icon"></view>
      <text>è¿”å›åˆ—è¡¨</text>
    </button>
    <view class="template-title">{{templateName}}</view>
    <button class="use-btn" bindtap="useTemplate" type="primary">ä½¿ç”¨æ­¤æ¨¡æ¿</button>
  </view>

  <!-- æ¨¡æ¿é¢„è§ˆåŒºåŸŸ -->
  <view class="preview-container">
    <!-- ç®€å†é¢„è§ˆå¡ç‰‡ -->
    <view class="resume-card {{template.styleClass || 'basic-template'}}">
      <!-- æ¨¡æ¿è§†è§‰æ ‡è¯† -->
      <view class="template-marker" style="background-color: {{template.accentColor}};"></view>
      
      <!-- ä¸ªäººä¿¡æ¯éƒ¨åˆ† -->
      <view class="personal-info section" wx:if="{{template.sections.personalInfo}}">
        <text class="name">{{previewData.personalInfo.name}}</text>
        <text class="job-title">{{previewData.personalInfo.jobTitle}}</text>
        <view class="contact-info">
          <view class="contact-item">
            <text class="contact-icon">ğŸ“±</text>
            <text class="contact-text">{{previewData.personalInfo.phone}}</text>
          </view>
          <view class="contact-item">
            <text class="contact-icon">âœ‰ï¸</text>
            <text class="contact-text">{{previewData.personalInfo.email}}</text>
          </view>
          <view class="contact-item">
            <text class="contact-icon">ğŸ“</text>
            <text class="contact-text">{{previewData.personalInfo.address}}</text>
          </view>
        </view>
      </view>

      <!-- æ•™è‚²ç»å† -->
      <view class="section" wx:if="{{template.sections.education}}">
        <view class="section-title" style="color: {{template.accentColor}};">æ•™è‚²ç»å†</view>
        <view class="section-content">
          <view class="education-item" wx:for="{{previewData.education}}" wx:key="index">
            <view class="education-header work-item-header">
              <text class="school">{{item.school}}</text>
              <text class="date">{{item.startDate}} - {{item.endDate}}</text>
            </view>
            <view class="education-detail">
              <text class="major">{{item.major}}</text>
              <text class="degree">{{item.degree}}</text>
            </view>
          </view>
        </view>
      </view>

      <!-- å·¥ä½œç»å† -->
      <view class="section" wx:if="{{template.sections.workExperience}}">
        <view class="section-title" style="color: {{template.accentColor}};">å·¥ä½œç»å†</view>
        <view class="section-content">
          <view class="work-item" wx:for="{{previewData.workExperience}}" wx:key="index">
            <view class="work-header work-item-header">
              <text class="company">{{item.company}}</text>
              <text class="date">{{item.startDate}} - {{item.endDate}}</text>
            </view>
            <text class="position">{{item.position}}</text>
            <text class="description">{{item.description}}</text>
          </view>
        </view>
      </view>

      <!-- é¡¹ç›®ç»éªŒ -->
      <view class="section" wx:if="{{template.sections.projects}}">
        <view class="section-title" style="color: {{template.accentColor}};">é¡¹ç›®ç»éªŒ</view>
        <view class="section-content">
          <view class="project-item" wx:for="{{previewData.projects}}" wx:key="index">
            <view class="project-header work-item-header">
              <text class="project-name">{{item.name}}</text>
              <text class="date">{{item.startDate}} - {{item.endDate}}</text>
            </view>
            <text class="role">{{item.role}}</text>
            <text class="description">{{item.description}}</text>
          </view>
        </view>
      </view>

      <!-- ä¸“ä¸šæŠ€èƒ½ -->
      <view class="section" wx:if="{{template.sections.skills}}">
        <view class="section-title" style="color: {{template.accentColor}};">ä¸“ä¸šæŠ€èƒ½</view>
        <view class="section-content">
          <view class="skills-container">
            <view class="skill-tag" wx:for="{{previewData.skills}}" wx:key="index" style="color: {{template.accentColor}};">
              <text class="skill-dot">â€¢</text>
              {{item}}
            </view>
          </view>
        </view>
      </view>

      <!-- è‡ªæˆ‘è¯„ä»· -->
      <view class="section" wx:if="{{template.sections.selfEvaluation}}">
        <view class="section-title" style="color: {{template.accentColor}};">è‡ªæˆ‘è¯„ä»·</view>
        <view class="section-content">
          <view class="self-evaluation">
            <text class="eval-quote">"</text>
            <text class="eval-content">{{previewData.selfEvaluation}}</text>
            <text class="eval-quote">"</text>
          </view>
        </view>
      </view>
      
      <!-- é¡µè„šè£…é¥°å…ƒç´  -->
      <view class="resume-footer">
        <view class="footer-divider" style="background-color: {{template.accentColor}};"></view>
        <view class="footer-note">
          <text>ç®€å†æ¨¡æ¿é¢„è§ˆ</text>
        </view>
      </view>
    </view>
  </view>
</view>