<!--pages/salary/matcher.wxml-->
<view class="container">
  <view class="header">
    <text class="title">城市薪资匹配</text>
    <text class="subtitle">精准分析岗位薪资水平</text>
  </view>

  <view class="content">
    <!-- 城市选择 -->
    <view class="section">
      <view class="section-title">选择城市</view>
      <view class="city-grid">
        <view 
          wx:for="{{cities}}" 
          wx:key="index"
          class="city-item {{selectedCity === item ? 'selected' : ''}}"
          bindtap="selectCity"
          data-city="{{item}}"
        >
          {{item}}
        </view>
      </view>
    </view>

    <!-- 经验年限选择 -->
    <view class="section">
      <view class="section-title">经验年限</view>
      <view class="experience-scroll">
        <view 
          wx:for="{{experienceYears}}" 
          wx:key="index"
          class="experience-item {{selectedExperience === item ? 'selected' : ''}}"
          bindtap="selectExperience"
          data-experience="{{item}}"
        >
          {{item}}
        </view>
      </view>
    </view>

    <!-- 职位类型输入 -->
    <view class="section">
      <view class="section-title">职位类型</view>
      <view class="input-group">
        <input 
          class="input" 
          placeholder="例如：Java、前端、产品经理等" 
          value="{{jobType}}"
          bindinput="inputJobType"
        />
        <button class="match-btn" bindtap="matchSalary" loading="{{loading}}">
          {{loading ? '分析中...' : '薪资分析'}}
        </button>
      </view>
    </view>

    <!-- 结果展示 -->
    <view class="result-section" wx:if="{{salaryResult}}">
      <view class="result-header">
        <text class="result-title">薪资分析结果</text>
        <button class="rematch-btn" size="mini" bindtap="rematch">重新分析</button>
      </view>
      
      <view class="salary-card">
        <view class="salary-main">
          <text class="salary-amount">{{salaryResult.averageSalary}}</text>
          <text class="salary-unit">/月</text>
        </view>
        <view class="salary-range">
          <text>薪资范围: {{salaryResult.minSalary}} - {{salaryResult.maxSalary}}</text>
        </view>
      </view>

      <view class="info-grid">
        <view class="info-item">
          <text class="info-value">{{salaryResult.positionCount}}</text>
          <text class="info-label">相关岗位数</text>
        </view>
        <view class="info-item">
          <text class="info-value">{{salaryResult.trend}}</text>
          <text class="info-label">市场趋势</text>
        </view>
      </view>

      <view class="analysis-text">
        {{salaryResult.analysis}}
      </view>
    </view>
  </view>
</view>