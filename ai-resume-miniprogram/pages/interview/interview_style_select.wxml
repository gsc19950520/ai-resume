<!-- interview_style_select.wxml -->
<view class="container">

  <!-- 简历选择模块 - 有简历时显示 -->
  <block wx:if="{{resumeList.length > 0 && !hasResumeFromHome}}">
  <!-- 顶部导航栏 -->
  <view class="header">
    <view class="header-left">
      <image class="avatar-icon" src="/assets/images/avatar.jpg"></image>
    </view>
    <view class="header-right"></view>
  </view>
    <view class="resume-selector">
      <view class="section-title">选择简历</view>
      <view class="resume-picker-wrapper">
        <picker class="resume-picker" bindchange="selectResume" value="{{resumeIndex}}" range="{{resumeList}}" range-key="title">
          <view class="picker-content">
            {{resumeList.length > 0 ? resumeList[resumeIndex].title : '请选择简历'}}
            <view class="arrow">▶</view>
          </view>
        </picker>
      </view>
      <view class="job-info" wx:if="{{selectedResume}}">
        <view class="job-label">应聘职位：</view>
        <view class="job-badge">{{selectedResume.occupation || '未设置'}}</view>
      </view>
    </view>
  </block>

  <!-- 无简历提示 - 无简历时显示 -->
  <block wx:elif="{{resumeList.length === 0}}">
    <view class="no-resume-prompt">
      <view class="no-resume-icon">📄</view>
      <view class="no-resume-title">您还没有创建简历</view>
      <view class="no-resume-desc">为了开始面试模拟，您需要先创建一份简历</view>
      <view class="buttons-container">
        <button class="create-resume-btn" bindtap="navigateToCreateResume" type="default">创建简历</button>
      </view>
    </view>
  </block>

  <!-- 面试官风格选择模块 -->
  <view class="style-selector">
    <view class="selector-title">选择面试官风格</view>
    <view class="selector-subtitle">不同风格的面试官会以不同的方式提问</view>
    
    <!-- 面试官风格卡片网格 -->
    <view class="persona-grid">
      <view class="persona-card {{selectedPersona === item.id ? 'selected' : ''}}" wx:for="{{personas}}" wx:key="id" data-id="{{item.id}}" bindtap="selectPersona">
        <view class="persona-emoji">{{item.emoji}}</view>
        <view class="persona-name">{{item.name}}</view>
        <view class="persona-description">{{item.description}}</view>
      </view>
    </view>
    
    <!-- 预览问题 -->
    <view class="preview-section">
      <view class="preview-title">预览问题</view>
      <view class="preview-question">{{previewQuestion || '请先选择面试官风格'}}</view>
    </view>
    
    <!-- 分析简历按钮 -->
    <button class="analyze-resume-btn {{selectedResume ? 'active' : 'disabled'}}" disabled="{{!selectedResume}}" bindtap="analyzeResume">
      分析简历
    </button>
    
      <!-- 开始面试按钮 -->
    <button class="start-interview-btn {{selectedPersona && selectedResume ? 'active' : 'disabled'}}" disabled="{{!selectedPersona || !selectedResume}}" bindtap="startInterview">
      开始面试
    </button>
  </view>
</view>