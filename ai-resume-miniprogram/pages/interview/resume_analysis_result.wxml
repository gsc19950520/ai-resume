<!-- resume_analysis_result.wxml -->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="back-btn" bindtap="goBack">â€¹ è¿”å›</view>
    <view class="page-title">ç®€å†åˆ†ææŠ¥å‘Š</view>
    <view class="header-placeholder"></view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{!analysisData}}" class="loading-container">
    <view class="loading-spinner"></view>
    <view class="loading-text">æ­£åœ¨åŠ è½½åˆ†æç»“æœ...</view>
  </view>

  <!-- åˆ†æç»“æœå†…å®¹ -->
  <scroll-view wx:else scroll-y class="analysis-content">
    
    <!-- å€™é€‰äººåŸºæœ¬ä¿¡æ¯ -->
    <view class="analysis-section">
      <view class="section-header">
        <view class="section-title">ğŸ‘¤ åŸºæœ¬ä¿¡æ¯</view>
      </view>
      <view class="section-content">
        <view class="info-item">
          <text class="info-label">å§“åï¼š</text>
          <text class="info-value">{{analysisData.candidateInfo.name}}</text>
        </view>
        <view class="info-item">
          <text class="info-label">å·¥ä½œå¹´é™ï¼š</text>
          <text class="info-value">{{analysisData.candidateInfo.workingYears}}å¹´</text>
        </view>
        <view class="info-item">
          <text class="info-label">ç»éªŒçº§åˆ«ï¼š</text>
          <text class="info-value level-badge level-{{analysisData.candidateInfo.experienceLevel}}">{{analysisData.candidateInfo.experienceLevel}}</text>
        </view>
      </view>
    </view>

    <!-- æŠ€æœ¯æ ˆåˆ†æ -->
    <view class="analysis-section">
      <view class="section-header">
        <view class="section-title">ğŸ’» æŠ€æœ¯æ ˆåˆ†æ</view>
      </view>
      <view class="section-content">
        <view class="tech-category" wx:for="{{analysisData.technicalAnalysis.techStack}}" wx:key="category" wx:for-item="tech">
          <view class="tech-header">
            <text class="tech-category-name">{{tech.category}}</text>
            <text class="tech-proficiency">ç†Ÿç»ƒåº¦: {{tech.proficiency}}/5</text>
          </view>
          <view class="tech-skills">
            <text class="skill-tag" wx:for="{{tech.skills}}" wx:key="*this">{{item}}</text>
          </view>
        </view>
        <view class="analysis-summary">
          <text class="summary-text">{{analysisData.technicalAnalysis.analysis}}</text>
        </view>
      </view>
    </view>

    <!-- é¡¹ç›®ç»éªŒåˆ†æ -->
    <view class="analysis-section">
      <view class="section-header">
        <view class="section-title">ğŸš€ é¡¹ç›®ç»éªŒåˆ†æ</view>
      </view>
      <view class="section-content">
        <view class="project-stats">
          <view class="stat-item">
            <text class="stat-number">{{analysisData.projectAnalysis.totalProjects}}</text>
            <text class="stat-label">æ€»é¡¹ç›®æ•°</text>
          </view>
          <view class="stat-item">
            <text class="stat-number">{{analysisData.projectAnalysis.avgProjectScale}}</text>
            <text class="stat-label">å¹³å‡é¡¹ç›®è§„æ¨¡</text>
          </view>
          <view class="stat-item">
            <text class="stat-number">{{analysisData.projectAnalysis.techDiversityScore}}</text>
            <text class="stat-label">æŠ€æœ¯å¤šæ ·æ€§</text>
          </view>
        </view>
        <view class="project-highlights">
          <text class="highlights-title">é¡¹ç›®äº®ç‚¹ï¼š</text>
          <text class="highlights-text">{{analysisData.projectAnalysis.highlights}}</text>
        </view>
      </view>
    </view>

    <!-- ä¸šåŠ¡èƒ½åŠ›åˆ†æ -->
    <view class="analysis-section">
      <view class="section-header">
        <view class="section-title">ğŸ“Š ä¸šåŠ¡èƒ½åŠ›åˆ†æ</view>
      </view>
      <view class="section-content">
        <view class="business-metrics">
          <view class="metric-item" wx:for="{{analysisData.businessAnalysis.metrics}}" wx:key="name">
            <view class="metric-header">
              <text class="metric-name">{{item.name}}</text>
              <text class="metric-score">{{item.score}}/5</text>
            </view>
            <view class="metric-bar">
              <view class="metric-fill" style="width: {{item.score * 20}}%"></view>
            </view>
            <text class="metric-description">{{item.description}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- é¢è¯•é—®é¢˜æ¸…å• -->
    <view class="analysis-section">
      <view class="section-header">
        <view class="section-title">â“ æ¨èé¢è¯•é—®é¢˜</view>
        <view class="section-subtitle">åŸºäºç®€å†åˆ†æç”Ÿæˆçš„é’ˆå¯¹æ€§é—®é¢˜</view>
      </view>
      <view class="section-content">
        <view class="question-category" wx:for="{{analysisData.interviewQuestions}}" wx:key="category" wx:for-item="category">
          <view class="category-header">
            <text class="category-name">{{category.category}}</text>
            <text class="category-count">{{category.questions.length}}ä¸ªé—®é¢˜</text>
          </view>
          <view class="question-list">
            <view class="question-item" wx:for="{{category.questions}}" wx:key="id" wx:for-item="question">
              <view class="question-header">
                <text class="question-number">{{index + 1}}.</text>
                <text class="question-content">{{question.content}}</text>
                <text class="question-difficulty difficulty-{{question.difficulty}}">{{question.difficulty}}</text>
              </view>
              <view class="question-details">
                <text class="question-purpose">ğŸ’¡ è€ƒå¯Ÿç›®çš„ï¼š{{question.purpose}}</text>
                <text class="question-criteria">âœ… è¯„ä¼°æ ‡å‡†ï¼š{{question.evaluationCriteria}}</text>
                <text class="question-followup" wx:if="{{question.followUpStrategy}}">ğŸ”„ è·Ÿè¿›ç­–ç•¥ï¼š{{question.followUpStrategy}}</text>
              </view>
            </view>
          </view>
        </view>
      </view>
    </view>

    <!-- æ€»ç»“ä¸å»ºè®® -->
    <view class="analysis-section">
      <view class="section-header">
        <view class="section-title">ğŸ“‹ æ€»ç»“ä¸å»ºè®®</view>
      </view>
      <view class="section-content">
        <view class="summary-item">
          <text class="summary-title">æ ¸å¿ƒä¼˜åŠ¿ï¼š</text>
          <text class="summary-text">{{analysisData.summary.strengths}}</text>
        </view>
        <view class="summary-item">
          <text class="summary-title">å…³æ³¨é‡ç‚¹ï¼š</text>
          <text class="summary-text">{{analysisData.summary.keyPoints}}</text>
        </view>
        <view class="summary-item">
          <text class="summary-title">é¢è¯•å»ºè®®ï¼š</text>
          <text class="summary-text">{{analysisData.summary.suggestions}}</text>
        </view>
      </view>
    </view>

  </scroll-view>

  <!-- åº•éƒ¨æ“ä½œæŒ‰é’® -->
  <view class="bottom-actions">
    <button class="action-btn secondary" bindtap="shareAnalysis">åˆ†äº«æŠ¥å‘Š</button>
    <button class="action-btn primary" bindtap="startInterviewFromAnalysis">å¼€å§‹é¢è¯•</button>
  </view>
</view>