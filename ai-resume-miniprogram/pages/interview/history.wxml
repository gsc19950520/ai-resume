<view class="container">
  <view class="header">
    <text class="title">面试历史</text>
  </view>

  <view class="content">
    <view class="interview-list">
      <view 
        wx:for="{{interviewList}}" 
        wx:key="id"
        wx:for-index="index"
        class="interview-item-wrapper"
        data-index="{{index}}"
        bindtouchstart="onTouchStart"
        bindtouchmove="onTouchMove"
        bindtouchend="onTouchEnd"
      >
        <!-- 删除按钮（固定底层） -->
        <view 
          class="delete-btn"
          bindtap="deleteInterview"
          data-id="{{item.id}}"
        >
          删除
        </view>

        <!-- 滑动主体 -->
        <view 
          class="interview-item"
          style="transform: translateX({{item.translateX}}px);"
          bindtap="viewReport"
          data-id="{{item.id}}"
        >
          <view class="interview-header">
            <text class="interview-title">{{item.title || 'AI模拟面试'}}</text>
            <text class="interview-time">{{item.createTime}}</text>
          </view>

          <view class="interview-info">
            <text class="interview-result">
              {{item.status === 'completed' ? (item.score ? '得分: ' + item.score : '已完成') : '未完成'}}
            </text>
          </view>

          <view class="interview-arrow">
            <image src="/images/arrow.png" mode="aspectFit"></image>
          </view>
        </view>
      </view>
    </view>

    <view class="empty-state" wx:if="{{!loading && interviewList.length === 0}}">
      <image src="/images/history.png" mode="aspectFit"></image>
      <text class="empty-text">暂无面试记录</text>
      <button class="empty-btn" bindtap="startNewInterview">开始新面试</button>
    </view>

    <view class="loading-state" wx:if="{{loading}}">
      <text>加载中...</text>
    </view>
  </view>

  <view class="bottom-actions"  wx:if="{{interviewList.length !== 0}}">
    <button class="primary-btn" bindtap="startNewInterview">开始新面试</button>
  </view>
</view>
